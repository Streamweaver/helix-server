# Generated by Django 3.2 on 2023-07-12 05:28

from django.db import migrations
from utils.common import round_half_up
from decimal import Decimal


class Migration(migrations.Migration):

    def update_household_size(apps, schema_editor):
        Figure = apps.get_model('entry', 'Figure')
        household_data = [
            {"id": "719", "household_size": "0"},
            {"id": "720", "household_size": "0"},
            {"id": "342", "household_size": "0"},
            {"id": "718", "household_size": "0"},
            {"id": "721", "household_size": "0"},
            {"id": "2030", "household_size": "2.3"},
            {"id": "1677", "household_size": "2.3"},
            {"id": "1712", "household_size": "2.3"},
            {"id": "1709", "household_size": "2.3"},
            {"id": "2287", "household_size": "2.4"},
            {"id": "393", "household_size": "2.4"},
            {"id": "201", "household_size": "2.4"},
            {"id": "397", "household_size": "2.4"},
            {"id": "2286", "household_size": "2.4"},
            {"id": "1124", "household_size": "2.5"},
            {"id": "1127", "household_size": "2.5"},
            {"id": "1341", "household_size": "2.5"},
            {"id": "1135", "household_size": "2.5"},
            {"id": "1132", "household_size": "2.5"},
            {"id": "1131", "household_size": "2.5"},
            {"id": "1130", "household_size": "2.5"},
            {"id": "2233", "household_size": "2.5"},
            {"id": "2232", "household_size": "2.5"},
            {"id": "1097", "household_size": "2.5"},
            {"id": "1125", "household_size": "2.5"},
            {"id": "579", "household_size": "2.6"},
            {"id": "548", "household_size": "2.6"},
            {"id": "576", "household_size": "2.6"},
            {"id": "2120", "household_size": "2.6"},
            {"id": "2119", "household_size": "2.6"},
            {"id": "2087", "household_size": "2.6"},
            {"id": "2086", "household_size": "2.6"},
            {"id": "2083", "household_size": "2.6"},
            {"id": "2051", "household_size": "2.6"},
            {"id": "2049", "household_size": "2.6"},
            {"id": "352", "household_size": "2.6"},
            {"id": "362", "household_size": "2.6"},
            {"id": "614", "household_size": "2.6"},
            {"id": "613", "household_size": "2.6"},
            {"id": "369", "household_size": "2.6"},
            {"id": "370", "household_size": "2.6"},
            {"id": "371", "household_size": "2.6"},
            {"id": "373", "household_size": "2.6"},
            {"id": "612", "household_size": "2.6"},
            {"id": "610", "household_size": "2.6"},
            {"id": "601", "household_size": "2.6"},
            {"id": "600", "household_size": "2.6"},
            {"id": "598", "household_size": "2.6"},
            {"id": "596", "household_size": "2.6"},
            {"id": "595", "household_size": "2.6"},
            {"id": "588", "household_size": "2.6"},
            {"id": "587", "household_size": "2.6"},
            {"id": "586", "household_size": "2.6"},
            {"id": "585", "household_size": "2.6"},
            {"id": "547", "household_size": "2.6"},
            {"id": "936", "household_size": "2.6"},
            {"id": "933", "household_size": "2.6"},
            {"id": "930", "household_size": "2.6"},
            {"id": "929", "household_size": "2.6"},
            {"id": "928", "household_size": "2.6"},
            {"id": "922", "household_size": "2.6"},
            {"id": "162", "household_size": "2.6"},
            {"id": "921", "household_size": "2.6"},
            {"id": "920", "household_size": "2.6"},
            {"id": "894", "household_size": "2.6"},
            {"id": "889", "household_size": "2.6"},
            {"id": "888", "household_size": "2.6"},
            {"id": "885", "household_size": "2.6"},
            {"id": "884", "household_size": "2.6"},
            {"id": "883", "household_size": "2.6"},
            {"id": "882", "household_size": "2.6"},
            {"id": "858", "household_size": "2.6"},
            {"id": "836", "household_size": "2.6"},
            {"id": "785", "household_size": "2.6"},
            {"id": "784", "household_size": "2.6"},
            {"id": "783", "household_size": "2.6"},
            {"id": "775", "household_size": "2.6"},
            {"id": "773", "household_size": "2.6"},
            {"id": "769", "household_size": "2.6"},
            {"id": "765", "household_size": "2.6"},
            {"id": "739", "household_size": "2.6"},
            {"id": "738", "household_size": "2.6"},
            {"id": "737", "household_size": "2.6"},
            {"id": "736", "household_size": "2.6"},
            {"id": "735", "household_size": "2.6"},
            {"id": "732", "household_size": "2.6"},
            {"id": "731", "household_size": "2.6"},
            {"id": "730", "household_size": "2.6"},
            {"id": "706", "household_size": "2.6"},
            {"id": "679", "household_size": "2.6"},
            {"id": "632", "household_size": "2.6"},
            {"id": "630", "household_size": "2.6"},
            {"id": "629", "household_size": "2.6"},
            {"id": "627", "household_size": "2.6"},
            {"id": "340", "household_size": "2.6"},
            {"id": "341", "household_size": "2.6"},
            {"id": "1716", "household_size": "2.7"},
            {"id": "664", "household_size": "2.7"},
            {"id": "662", "household_size": "2.7"},
            {"id": "825", "household_size": "2.8"},
            {"id": "1834", "household_size": "3"},
            {"id": "106", "household_size": "3"},
            {"id": "92", "household_size": "3"},
            {"id": "2288", "household_size": "3"},
            {"id": "73", "household_size": "3"},
            {"id": "55", "household_size": "3"},
            {"id": "1835", "household_size": "3"},
            {"id": "753", "household_size": "3.1"},
            {"id": "28", "household_size": "3.1"},
            {"id": "32", "household_size": "3.1"},
            {"id": "27", "household_size": "3.1"},
            {"id": "33", "household_size": "3.1"},
            {"id": "26", "household_size": "3.1"},
            {"id": "343", "household_size": "3.1"},
            {"id": "344", "household_size": "3.1"},
            {"id": "29", "household_size": "3.1"},
            {"id": "1816", "household_size": "3.2"},
            {"id": "244", "household_size": "3.2"},
            {"id": "431", "household_size": "3.2"},
            {"id": "687", "household_size": "3.2"},
            {"id": "689", "household_size": "3.2"},
            {"id": "690", "household_size": "3.2"},
            {"id": "691", "household_size": "3.2"},
            {"id": "692", "household_size": "3.2"},
            {"id": "694", "household_size": "3.2"},
            {"id": "695", "household_size": "3.2"},
            {"id": "696", "household_size": "3.2"},
            {"id": "699", "household_size": "3.2"},
            {"id": "704", "household_size": "3.2"},
            {"id": "705", "household_size": "3.2"},
            {"id": "745", "household_size": "3.2"},
            {"id": "746", "household_size": "3.2"},
            {"id": "755", "household_size": "3.2"},
            {"id": "756", "household_size": "3.2"},
            {"id": "758", "household_size": "3.2"},
            {"id": "759", "household_size": "3.2"},
            {"id": "760", "household_size": "3.2"},
            {"id": "764", "household_size": "3.2"},
            {"id": "1055", "household_size": "3.2"},
            {"id": "1817", "household_size": "3.2"},
            {"id": "1934", "household_size": "3.2"},
            {"id": "1937", "household_size": "3.2"},
            {"id": "2280", "household_size": "3.2"},
            {"id": "302", "household_size": "3.5"},
            {"id": "1983", "household_size": "3.5"},
            {"id": "332", "household_size": "3.5"},
            {"id": "310", "household_size": "3.5"},
            {"id": "260", "household_size": "3.5"},
            {"id": "306", "household_size": "3.5"},
            {"id": "810", "household_size": "3.6"},
            {"id": "811", "household_size": "3.6"},
            {"id": "813", "household_size": "3.6"},
            {"id": "816", "household_size": "3.6"},
            {"id": "817", "household_size": "3.6"},
            {"id": "818", "household_size": "3.6"},
            {"id": "820", "household_size": "3.6"},
            {"id": "860", "household_size": "3.6"},
            {"id": "1264", "household_size": "3.6"},
            {"id": "1263", "household_size": "3.6"},
            {"id": "1262", "household_size": "3.6"},
            {"id": "2098", "household_size": "3.6"},
            {"id": "2099", "household_size": "3.6"},
            {"id": "1285", "household_size": "3.6"},
            {"id": "1261", "household_size": "3.6"},
            {"id": "1259", "household_size": "3.6"},
            {"id": "1287", "household_size": "3.6"},
            {"id": "1289", "household_size": "3.6"},
            {"id": "1292", "household_size": "3.6"},
            {"id": "1824", "household_size": "3.6"},
            {"id": "1945", "household_size": "3.6"},
            {"id": "1946", "household_size": "3.6"},
            {"id": "2281", "household_size": "3.6"},
            {"id": "1964", "household_size": "3.6"},
            {"id": "1965", "household_size": "3.6"},
            {"id": "1968", "household_size": "3.6"},
            {"id": "1975", "household_size": "3.6"},
            {"id": "1282", "household_size": "3.6"},
            {"id": "1284", "household_size": "3.6"},
            {"id": "1293", "household_size": "3.6"},
            {"id": "2010", "household_size": "3.6"},
            {"id": "1281", "household_size": "3.6"},
            {"id": "1280", "household_size": "3.6"},
            {"id": "1275", "household_size": "3.6"},
            {"id": "1273", "household_size": "3.6"},
            {"id": "859", "household_size": "3.6"},
            {"id": "1283", "household_size": "3.6"},
            {"id": "1873", "household_size": "3.6"},
            {"id": "1872", "household_size": "3.6"},
            {"id": "862", "household_size": "3.6"},
            {"id": "861", "household_size": "3.6"},
            {"id": "799", "household_size": "3.6"},
            {"id": "800", "household_size": "3.6"},
            {"id": "809", "household_size": "3.6"},
            {"id": "93", "household_size": "3.7"},
            {"id": "86", "household_size": "3.7"},
            {"id": "89", "household_size": "3.7"},
            {"id": "2106", "household_size": "3.7"},
            {"id": "99", "household_size": "3.7"},
            {"id": "98", "household_size": "3.7"},
            {"id": "1220", "household_size": "3.7"},
            {"id": "95", "household_size": "3.7"},
            {"id": "834", "household_size": "3.7"},
            {"id": "1147", "household_size": "3.7"},
            {"id": "77", "household_size": "3.7"},
            {"id": "1006", "household_size": "3.7"},
            {"id": "1005", "household_size": "3.7"},
            {"id": "976", "household_size": "3.7"},
            {"id": "972", "household_size": "3.7"},
            {"id": "833", "household_size": "3.7"},
            {"id": "1989", "household_size": "3.8"},
            {"id": "2066", "household_size": "3.8"},
            {"id": "2207", "household_size": "3.8"},
            {"id": "156", "household_size": "3.8"},
            {"id": "981", "household_size": "3.8"},
            {"id": "990", "household_size": "3.8"},
            {"id": "991", "household_size": "3.8"},
            {"id": "994", "household_size": "3.8"},
            {"id": "995", "household_size": "3.8"},
            {"id": "1025", "household_size": "3.8"},
            {"id": "1033", "household_size": "3.8"},
            {"id": "1038", "household_size": "3.8"},
            {"id": "1042", "household_size": "3.8"},
            {"id": "1048", "household_size": "3.8"},
            {"id": "1049", "household_size": "3.8"},
            {"id": "1116", "household_size": "3.8"},
            {"id": "1117", "household_size": "3.8"},
            {"id": "1118", "household_size": "3.8"},
            {"id": "1121", "household_size": "3.8"},
            {"id": "2025", "household_size": "3.8"},
            {"id": "1189", "household_size": "3.8"},
            {"id": "2023", "household_size": "3.8"},
            {"id": "1992", "household_size": "3.8"},
            {"id": "2270", "household_size": "3.9"},
            {"id": "2269", "household_size": "3.9"},
            {"id": "1833", "household_size": "4"},
            {"id": "899", "household_size": "4"},
            {"id": "943", "household_size": "4"},
            {"id": "944", "household_size": "4"},
            {"id": "157", "household_size": "4"},
            {"id": "316", "household_size": "4.1"},
            {"id": "236", "household_size": "4.1"},
            {"id": "239", "household_size": "4.1"},
            {"id": "235", "household_size": "4.1"},
            {"id": "238", "household_size": "4.1"},
            {"id": "233", "household_size": "4.1"},
            {"id": "234", "household_size": "4.1"},
            {"id": "240", "household_size": "4.1"},
            {"id": "2271", "household_size": "4.1"},
            {"id": "2272", "household_size": "4.1"},
            {"id": "237", "household_size": "4.1"},
            {"id": "901", "household_size": "4.2"},
            {"id": "568", "household_size": "4.2"},
            {"id": "567", "household_size": "4.2"},
            {"id": "561", "household_size": "4.2"},
            {"id": "560", "household_size": "4.2"},
            {"id": "556", "household_size": "4.2"},
            {"id": "553", "household_size": "4.2"},
            {"id": "433", "household_size": "4.2"},
            {"id": "551", "household_size": "4.2"},
            {"id": "550", "household_size": "4.2"},
            {"id": "187", "household_size": "4.2"},
            {"id": "549", "household_size": "4.2"},
            {"id": "569", "household_size": "4.2"},
            {"id": "180", "household_size": "4.2"},
            {"id": "900", "household_size": "4.2"},
            {"id": "1331", "household_size": "4.3"},
            {"id": "1333", "household_size": "4.3"},
            {"id": "1726", "household_size": "4.3"},
            {"id": "1336", "household_size": "4.3"},
            {"id": "1724", "household_size": "4.3"},
            {"id": "684", "household_size": "4.3"},
            {"id": "700", "household_size": "4.3"},
            {"id": "702", "household_size": "4.3"},
            {"id": "1721", "household_size": "4.3"},
            {"id": "298", "household_size": "4.3"},
            {"id": "1728", "household_size": "4.3"},
            {"id": "297", "household_size": "4.3"},
            {"id": "686", "household_size": "4.3"},
            {"id": "1722", "household_size": "4.3"},
            {"id": "685", "household_size": "4.3"},
            {"id": "1723", "household_size": "4.3"},
            {"id": "1727", "household_size": "4.3"},
            {"id": "1330", "household_size": "4.3"},
            {"id": "1679", "household_size": "4.4"},
            {"id": "1676", "household_size": "4.4"},
            {"id": "1690", "household_size": "4.4"},
            {"id": "1689", "household_size": "4.4"},
            {"id": "1691", "household_size": "4.4"},
            {"id": "1692", "household_size": "4.4"},
            {"id": "144", "household_size": "4.5"},
            {"id": "202", "household_size": "4.5"},
            {"id": "203", "household_size": "4.5"},
            {"id": "868", "household_size": "4.5"},
            {"id": "870", "household_size": "4.5"},
            {"id": "872", "household_size": "4.5"},
            {"id": "876", "household_size": "4.5"},
            {"id": "892", "household_size": "4.5"},
            {"id": "232", "household_size": "4.5"},
            {"id": "893", "household_size": "4.5"},
            {"id": "137", "household_size": "4.5"},
            {"id": "138", "household_size": "4.5"},
            {"id": "139", "household_size": "4.5"},
            {"id": "140", "household_size": "4.5"},
            {"id": "1225", "household_size": "4.5"},
            {"id": "141", "household_size": "4.5"},
            {"id": "142", "household_size": "4.5"},
            {"id": "231", "household_size": "4.5"},
            {"id": "143", "household_size": "4.5"},
            {"id": "300", "household_size": "4.6"},
            {"id": "303", "household_size": "4.6"},
            {"id": "301", "household_size": "4.6"},
            {"id": "509", "household_size": "4.6"},
            {"id": "299", "household_size": "4.6"},
            {"id": "251", "household_size": "4.6"},
            {"id": "250", "household_size": "4.6"},
            {"id": "247", "household_size": "4.6"},
            {"id": "515", "household_size": "4.6"},
            {"id": "517", "household_size": "4.6"},
            {"id": "522", "household_size": "4.6"},
            {"id": "532", "household_size": "4.6"},
            {"id": "533", "household_size": "4.6"},
            {"id": "1743", "household_size": "4.7"},
            {"id": "1747", "household_size": "4.7"},
            {"id": "1741", "household_size": "4.7"},
            {"id": "1303", "household_size": "4.7"},
            {"id": "1301", "household_size": "4.7"},
            {"id": "1739", "household_size": "4.7"},
            {"id": "1271", "household_size": "4.7"},
            {"id": "1268", "household_size": "4.7"},
            {"id": "1740", "household_size": "4.7"},
            {"id": "1326", "household_size": "4.8"},
            {"id": "1324", "household_size": "4.8"},
            {"id": "125", "household_size": "4.8"},
            {"id": "964", "household_size": "4.9"},
            {"id": "154", "household_size": "4.9"},
            {"id": "155", "household_size": "4.9"},
            {"id": "2279", "household_size": "4.9"},
            {"id": "965", "household_size": "4.9"},
            {"id": "117", "household_size": "4.9"},
            {"id": "118", "household_size": "4.9"},
            {"id": "122", "household_size": "4.9"},
            {"id": "1806", "household_size": "4.9"},
            {"id": "970", "household_size": "4.9"},
            {"id": "123", "household_size": "4.9"},
            {"id": "1297", "household_size": "5"},
            {"id": "1308", "household_size": "5"},
            {"id": "196", "household_size": "5.1"},
            {"id": "366", "household_size": "5.1"},
            {"id": "194", "household_size": "5.1"},
            {"id": "193", "household_size": "5.1"},
            {"id": "165", "household_size": "5.1"},
            {"id": "164", "household_size": "5.1"},
            {"id": "545", "household_size": "5.1"},
            {"id": "544", "household_size": "5.1"},
            {"id": "543", "household_size": "5.1"},
            {"id": "185", "household_size": "5.2"},
            {"id": "191", "household_size": "5.2"},
            {"id": "190", "household_size": "5.2"},
            {"id": "186", "household_size": "5.2"},
            {"id": "184", "household_size": "5.2"},
            {"id": "945", "household_size": "5.4"},
            {"id": "483", "household_size": "5.4"},
            {"id": "1899", "household_size": "5.4"},
            {"id": "1900", "household_size": "5.4"},
            {"id": "1901", "household_size": "5.4"},
            {"id": "952", "household_size": "5.5"},
            {"id": "241", "household_size": "5.5"},
            {"id": "367", "household_size": "5.5"},
            {"id": "951", "household_size": "5.5"},
            {"id": "954", "household_size": "5.5"},
            {"id": "582", "household_size": "5.6"},
            {"id": "583", "household_size": "5.6"},
            {"id": "126", "household_size": "5.9"},
            {"id": "127", "household_size": "5.9"},
            {"id": "2064", "household_size": "6.1"},
            {"id": "1165", "household_size": "6.2"},
            {"id": "1164", "household_size": "6.2"},
            {"id": "1163", "household_size": "6.2"},
            {"id": "1200", "household_size": "6.2"},
            {"id": "1201", "household_size": "6.2"},
            {"id": "1203", "household_size": "6.2"},
            {"id": "1205", "household_size": "6.2"},
            {"id": "1207", "household_size": "6.2"},
            {"id": "1209", "household_size": "6.2"},
            {"id": "1211", "household_size": "6.2"},
            {"id": "1214", "household_size": "6.2"},
            {"id": "1215", "household_size": "6.2"},
            {"id": "1217", "household_size": "6.2"},
            {"id": "1218", "household_size": "6.2"},
            {"id": "1166", "household_size": "6.2"},
            {"id": "420", "household_size": "6.6"},
            {"id": "136", "household_size": "7.4"},
            {"id": "129", "household_size": "7.4"},
            {"id": "135", "household_size": "7.4"},
            {"id": "145", "household_size": "7.4"},
            {"id": "134", "household_size": "7.4"},
            {"id": "131", "household_size": "7.4"},
            {"id": "130", "household_size": "7.4"},
            {"id": "100", "household_size": "7.4"},
            {"id": "1054", "household_size": "7.4"},
            {"id": "128", "household_size": "7.4"},
        ]

        household_size_mapping = {
            item['id']: item['household_size'] for item in household_data
        }

        old_ids = [item['id'] for item in household_data]

        updates = 0

        for figure in Figure.objects.filter(old_id__in=old_ids):
            household_size = household_size_mapping[figure.old_id]
            if figure.household_size is None:
                figure.household_size = household_size
                figure.save(update_fields=['household_size'])
            else:
                print(
                    f"Household size updated from {figure.household_size} to {household_size}"
                    f" for figure {figure.id} (old_id={figure.old_id})"
                )
                figure.household_size = household_size
                figure.save(update_fields=['household_size'])
            updates += 1

        print(f'Updated household size for {updates} figures')

    dependencies = [
        ('entry', '0093_alter_externalapidump_api_type'),
    ]

    operations = [
        migrations.RunPython(update_household_size, reverse_code=migrations.RunPython.noop),
    ]
